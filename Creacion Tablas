CREATE TABLE Medicamento (
    expediente SERIAL PRIMARY KEY,
    IUM INTEGER,
    producto VARCHAR(50),
    descripcioncomercial varchar (50),
    atc VARCHAR(50),
    formafarmaceutica integer
);

CREATE TABLE Principio_Activo (
    principioactivo VARCHAR(50) PRIMARY KEY,
    unidadmedida VARCHAR(12),
    unidadreferencia VARCHAR(12)
);

CREATE TABLE Composicion_Medicamento (
    expediente INTEGER REFERENCES MEDICAMENTO(expediente),
    principioactivo VARCHAR(50) REFERENCES PRINCIPIO_ACTIVO(principioactivo),
    concentracion INTEGER,
    cantidad INTEGER,
    PRIMARY KEY (expediente, principioactivo)
);

CREATE TABLE Registro_Sanitario (
    registrosanitario NUMERIC (12,0) SERIAL PRIMARY KEY,
    expediente INTEGER REFERENCES MEDICAMENTO(expediente),
    titular VARCHAR(50),
    fechaexpedicion DATE,
    fechavencimiento DATE,
    estadoregistro VARCHAR(50)
);

CREATE TABLE Control_Unico_Medicamentos (
    consecutivocum INTEGER SERIAL PRIMARY KEY,
    expediente INTEGER REFERENCES MEDICAMENTO(expediente),
    expedientecum INTEGER,
    cantidadcum INTEGER,
    estadocum VARCHAR(50),
    fechaactivo DATE,
    fechainactivo DATE,
    muestramedica BOOLEAN
);

CREATE TABLE Rol_Medicamento (
    nombrerol VARCHAR(50) PRIMARY KEY,
    registrosanitario NUMERIC (12,0) REFERENCES REGISTRO_SANITARIO(registrosanitario),
    tiporol VARCHAR(50) NOT NULL,
    descripcionatc VARCHAR(250),
    modalidad VARCHAR(50)
);

COPY Medicamento (expediente, producto, descripcioncomercial, atc, formafarmaceutica, IUM)
FROM 'C:/PC/Downloads/Medicamento.csv' 
WITH DELIMITER AS ';' CSV HEADER;

COPY Principio_Activo (principioactivo, unidadmedida, unidadreferenciada)
FROM 'C:/PC/Downloads/Principio_Activo.csv' 
WITH DELIMITER AS ';' CSV HEADER;

COPY Composicion_Medicamento (expediente, principioactivo, concentracion, cantidad)
FROM 'C:/PC/Downloads/Composicion_Medicamento.csv' 
WITH DELIMITER AS ';' CSV HEADER;

COPY Registro_Sanitario (registrosanitario, expediente, titular, fechaexpedicion, fechavencimiento, estadoregistro)
FROM 'C:/PC/Downloads/Registro_Sanitario.csv' 
WITH DELIMITER AS ';' CSV HEADER;

COPY Control_Unico_Medicamentos (consecutivocum, expediente, expedientecum, cantidadcum, estadocum, fechaactivo, fechainactivo, muestramedica)
FROM 'C:/PC/Downloads/Control_Unico_Medicamentos.csv' 
WITH DELIMITER AS ';' CSV HEADER;

COPY Rol_Medicamento (nombrerol, registrosanitario, tiporol, descripcionatc, modalidad)
FROM 'C:/PC/Downloads/Rol_Medicamento.csv' 
WITH DELIMITER AS ';' CSV HEADER;
